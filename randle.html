<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Randle - THE Randoms</title>
<link href="https://fonts.googleapis.com/css2?family=Jersey+10:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Jersey 10', sans-serif;
  background: #fff;
  color: #000;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 0;
  padding: 10px;
}

h1 {
  color: #E82B38;
  font-size: 32px;
  margin-bottom: 10px;
}

#board {
  display: grid;
  grid-template-rows: repeat(6, 50px);
  grid-gap: 5px;
  margin-bottom: 10px;
}

.row {
  display: flex;
  justify-content: center;
}

.cell {
  width: 50px;
  height: 50px;
  border: 2px solid #333;
  margin: 2px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  font-weight: 700;
  text-transform: uppercase;
  border-radius: 6px;
  transition: all 0.2s ease;
  background: #f2f2f2;
  font-family: 'Jersey 10', sans-serif;
}

.cell.correct { background: #4caf50; color: #fff; }
.cell.present { background: #ff9800; color: #fff; }
.cell.wrong { background: #333; color: #fff; }

#keyboard {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 5px;
}

.key {
  width: 40px;
  height: 40px;
  background: #E82B38;
  color: #fff;
  font-size: 18px;
  font-weight: 700;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  user-select: none;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  transition: all 0.15s ease;
  font-family: 'Jersey 10', sans-serif;
}

.key:hover:not(.blackout) { transform: translateY(-1px); box-shadow: 0 4px 8px rgba(0,0,0,0.3); }
.key.blackout { background: #333; cursor: default; box-shadow: none; }
.key.special { width: 70px; font-size: 16px; }
</style>
</head>
<body>

<h1>Randle</h1>
<div id="board"></div>
<div id="keyboard"></div>

<script>
// Keyboard sets by day
const keySets = {
  0: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split(''), 
  1: ['😀','😂','😍','😎','🥳','😡','😭','😴','😱','😇','🤯','🤔','😜','🤢','🤮','😳','🤫','🫣','😈','👻','💩','🦄','🐶','🐱','🍕','🍔'],
  2: ['0','1','2','3','4','5','6','7','8','9'], 
  3: ['!','@','#','$','%','^','&','*','(',')','-','+','=','~','`','|','/','?','<','>','[',']','{','}',';',':'], 
  4: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split(''), 
  5: ['😀','😂','😍','😎','🥳','😡','😭','😴','😱','😇','🤯','🤔','😜','🤢','🤮','😳','🤫','🫣','😈','👻','💩','🦄','🐶','🐱','🍕','🍔'], 
  6: ['0','1','2','3','4','5','6','7','8','9'], 
};

const today = new Date().getDay();
const keys = keySets[today];

// Generate puzzle (5 characters)
let puzzle = [];
while (puzzle.length < 5) {
  const candidate = keys[Math.floor(Math.random()*keys.length)];
  puzzle.push(candidate);
}

// Game state
let board = Array.from({length:6}, () => Array(5).fill(''));
let boardColors = Array.from({length:6}, () => Array(5).fill(''));
let currentRow = 0;
let currentCol = 0;

const boardDiv = document.getElementById('board');
const keyboardDiv = document.getElementById('keyboard');

function renderBoard() {
  boardDiv.innerHTML = '';
  board.forEach((row,rowIndex) => {
    const rowDiv = document.createElement('div');
    rowDiv.classList.add('row');
    row.forEach((cell,colIndex) => {
      const cellDiv = document.createElement('div');
      cellDiv.classList.add('cell');
      const color = boardColors[rowIndex][colIndex];
      if(color) cellDiv.classList.add(color);
      cellDiv.textContent = cell;
      rowDiv.appendChild(cellDiv);
    });
    boardDiv.appendChild(rowDiv);
  });
}

function renderKeyboard() {
  keyboardDiv.innerHTML = '';
  keys.forEach(k => {
    const keyBtn = document.createElement('button');
    keyBtn.classList.add('key');
    keyBtn.textContent = k;
    keyBtn.onclick = () => pressKey(k);
    keyboardDiv.appendChild(keyBtn);
  });

  const backspace = document.createElement('button');
  backspace.classList.add('key','special');
  backspace.textContent = '⌫';
  backspace.onclick = backspaceKey;
  keyboardDiv.appendChild(backspace);

  const enter = document.createElement('button');
  enter.classList.add('key','special');
  enter.textContent = 'Enter';
  enter.onclick = submitGuess;
  keyboardDiv.appendChild(enter);
}

function pressKey(k) {
  if(currentCol<5) {
    board[currentRow][currentCol] = k;
    boardColors[currentRow][currentCol] = '';
    currentCol++;
    renderBoard();
  }
}

function backspaceKey() {
  if(currentCol>0) {
    currentCol--;
    board[currentRow][currentCol] = '';
    boardColors[currentRow][currentCol] = '';
    renderBoard();
  }
}

function submitGuess() {
  if(currentCol<5) return;

  const guess = board[currentRow].slice();
  let puzzleCopy = puzzle.slice();
  
  // First pass: correct spots
  guess.forEach((c,i) => {
    if(c===puzzle[i]) {
      boardColors[currentRow][i]='correct';
      puzzleCopy[i]=null;
    }
  });

  // Second pass: present in puzzle but wrong spot
  guess.forEach((c,i)=>{
    if(!boardColors[currentRow][i]) {
      const idx = puzzleCopy.indexOf(c);
      if(idx>-1) {
        boardColors[currentRow][i]='present';
        puzzleCopy[idx]=null;
      } else {
        boardColors[currentRow][i]='wrong';
        // black out keyboard key
        document.querySelectorAll('.key').forEach(kb=>{
          if(kb.textContent===c) kb.classList.add('blackout');
        });
      }
    }
  });

  currentRow++;
  currentCol=0;
  renderBoard();

  if(guess.join('')===puzzle.join('')) {
    setTimeout(()=>alert('You got it!'),100);
  } else if(currentRow===6) {
    setTimeout(()=>alert('Out of tries! Answer: '+puzzle.join('')),100);
  }
}

renderBoard();
renderKeyboard();
</script>
</body>
</html>
