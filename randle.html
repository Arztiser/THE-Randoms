<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#E82B38">
<title>Randle - THE Randoms</title>
<link rel="icon" type="image/png" href="./img/pfp.png">
<link href="https://fonts.googleapis.com/css2?family=Jersey+10:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
<style>
  body { font-family:'Jersey 10',sans-serif; background:#fff; color:#000; margin:0; padding:0; display:flex; flex-direction:column; align-items:center; }
  h1 { color:#E82B38; margin-top:20px; }
  .board { display:grid; grid-template-rows:repeat(6,50px); grid-gap:5px; margin:20px 0; }
  .row { display:flex; gap:5px; justify-content:center; }
  .cell { width:50px; height:50px; border:2px solid #333; display:flex; align-items:center; justify-content:center; font-size:24px; border-radius:4px; }
  .keyboard { display:flex; flex-wrap:wrap; justify-content:center; gap:5px; max-width:500px; margin-bottom:20px; }
  .key { width:40px; height:40px; display:flex; align-items:center; justify-content:center; cursor:pointer; border-radius:6px; background:#eee; user-select:none; font-size:18px; }
  .key.disabled { background:#555; color:#aaa; cursor:not-allowed; }
  .key.enter { width:80px; background:#E82B38; color:white; font-weight:bold; }
  .key.backspace { background:#E82B38; color:white; font-weight:bold; }
  .feedback { margin-bottom:10px; font-size:22px; color:#E82B38; }
  .green { background:#6aaa64; color:white; }
  .yellow { background:#c9b458; color:white; }
  .gray { background:#787c7e; color:white; }
</style>
</head>
<body>
<h1>Randle</h1>
<div class="feedback" id="feedback"></div>
<div class="board" id="board"></div>
<div class="keyboard" id="keyboard"></div>

<script>
// --- CONFIG ---
const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
const emojis = ['😀','😂','🥰','😎','😡','🥳','🤯','😱','🤩','🤔','😴','🙃','😇','😈','🤖','👻','💀','🎃','🐶','🐱','🍎','🍕','⚽','🏀','🌞','⭐'];
const symbols = ['!','@','#','$','%','^','&','*','(',')','-','_','=','+','[',']','{','}',';','?','<','>','/','|','~','`'];
const numbers = ['0','1','2','3','4','5','6','7','8','9'];
const boardRows = 6;
const wordLength = 5;

// --- HELPER ---
function getDayMode() {
  const day = new Date().getDay(); // 0=Sunday
  switch(day){
    case 0: return letters;     
    case 1: return emojis;      
    case 2: return numbers;     
    case 3: return symbols;     
    case 4: return letters;     
    case 5: return emojis;      
    case 6: return numbers;     
  }
}
const modeSet = getDayMode();
const randomWord = Array.from({length: wordLength},()=>modeSet[Math.floor(Math.random()*modeSet.length)]);
let boardState = Array.from({length:boardRows},()=>Array(wordLength).fill(''));
let currentRow = 0;
let currentCol = 0;

// --- BOARD ---
const boardEl = document.getElementById('board');
boardState.forEach(row=>{
  const rowEl = document.createElement('div');
  rowEl.className='row';
  row.forEach(_=>{
    const cell = document.createElement('div');
    cell.className='cell';
    rowEl.appendChild(cell);
  });
  boardEl.appendChild(rowEl);
});

// --- KEYBOARD ---
const keyboardEl = document.getElementById('keyboard');
function createKeyboard(){
  keyboardEl.innerHTML='';
  modeSet.forEach(k=>{
    const key = document.createElement('div');
    key.textContent=k;
    key.className='key';
    key.addEventListener('click',()=>pressKey(k));
    keyboardEl.appendChild(key);
  });
  const enter = document.createElement('div');
  enter.textContent='ENTER';
  enter.className='key enter';
  enter.addEventListener('click',submitGuess);
  keyboardEl.appendChild(enter);

  const back = document.createElement('div');
  back.textContent='⌫';
  back.className='key backspace';
  back.addEventListener('click',backspace);
  keyboardEl.appendChild(back);
}
createKeyboard();

// --- GAME LOGIC ---
function pressKey(k){
  if(currentCol>=wordLength || currentRow>=boardRows) return;
  boardState[currentRow][currentCol] = k;
  boardEl.children[currentRow].children[currentCol].textContent = k;
  currentCol++;
}

function backspace(){
  if(currentCol>0){
    currentCol--;
    boardState[currentRow][currentCol]='';
    boardEl.children[currentRow].children[currentCol].textContent='';
  }
}

function submitGuess(){
  if(currentCol!==wordLength) return;
  const guess = boardState[currentRow];
  const feedbackEl = document.getElementById('feedback');

  const targetCount = {};
  randomWord.forEach(c=>targetCount[c]=(targetCount[c]||0)+1);
  const guessCount = {};

  boardEl.children[currentRow].childNodes.forEach((cell,i)=>{
    const g = guess[i];
    guessCount[g]=(guessCount[g]||0)+1;
    if(g===randomWord[i]){
      cell.classList.add('green');
    } else if(randomWord.includes(g)){
      cell.classList.add('yellow');
    } else {
      cell.classList.add('gray');
    }
  });

  document.querySelectorAll('.key').forEach(k=>{
    if(targetCount[k.textContent]){
      if((guessCount[k.textContent]||0)>=targetCount[k.textContent]){
        k.classList.add('disabled');
      }
    } else {
      k.classList.add('disabled');
    }
  });

  currentRow++;
  currentCol=0;

  if(guess.join('')===randomWord.join('')){
    feedbackEl.textContent='You guessed it!';
  } else if(currentRow>=boardRows){
    feedbackEl.textContent='Game Over! Word was: '+randomWord.join('');
  }
}

// --- KEYBOARD EVENTS ---
document.addEventListener('keydown',(e)=>{
  if(currentRow>=boardRows) return;
  const k = e.key.toUpperCase();
  if(modeSet.includes(k)) pressKey(k);
  else if(e.key==='Backspace') backspace();
  else if(e.key==='Enter') submitGuess();
});
</script>
</body>
</html>
