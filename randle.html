<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="theme-color" content="#E82B38" />
<title>Randle â€” THE Randoms</title>
<link href="https://fonts.googleapis.com/css2?family=Jersey+10:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
<style>
  /* Basic layout / header (borrowed from your homepage style) */
  :root{
    --theme-bg:#333;
    --theme-top:#f2f2f2;
    --accent:#E82B38;
  }
  html,body{height:100%;margin:0;font-family:'Jersey 10',sans-serif;background:#fff;color:#000;display:flex;flex-direction:column;}
  .topnav{height:60px;background:var(--theme-bg);color:var(--theme-top);display:flex;align-items:center;justify-content:space-between;padding:0 16px;box-sizing:border-box;z-index:20;}
  .topnav h1{margin:0;font-size:22px;}
  .topnav .logo{color:var(--theme-top);text-decoration:none;}
  .menu-icon{font-size:28px;cursor:pointer;user-select:none;color:var(--theme-top);}
  /* mobile nav */
  .topnav-right{display:none;position:fixed;top:60px;left:0;right:0;bottom:0;background:var(--theme-bg);z-index:999;flex-direction:column;overflow-y:auto;}
  .topnav.active .topnav-right{display:flex;}
  .accordion-section{display:flex;flex-direction:column;border-top:1px solid #444;}
  .accordion-toggle{background:none;color:var(--theme-top);padding:14px;text-align:left;font-size:20px;border:none;cursor:pointer;width:100%;font-family:'Jersey 10',sans-serif;}
  .accordion-content{display:none;flex-direction:column;background:#444;}
  .accordion-section.open .accordion-content{display:flex;}
  .accordion-content a{padding:10px 28px;color:var(--theme-top);text-decoration:none;border-top:1px solid #555;font-size:18px;}
  .clickable-section{background:var(--accent);color:#fff;padding:12px;text-align:center;font-weight:700;margin:8px;border-radius:6px;cursor:pointer;}
  /* page container that avoids scroll where possible */
  .page { flex:1; display:flex; flex-direction:column; align-items:center; justify-content:flex-start; padding:14px; box-sizing:border-box; min-height:calc(100vh - 120px); }
  h2 { margin:8px 0 20px 0; font-size:28px; }

  /* Board */
  #board { display:grid; grid-template-rows: repeat(6, 1fr); gap:6px; margin-top:6px; }
  .row { display:flex; gap:6px; justify-content:center; }
  .cell {
    width:56px; height:56px; display:flex; align-items:center; justify-content:center;
    border:2px solid #bdbdbd; font-size:28px; box-sizing:border-box; border-radius:6px;
    /* allow emoji color fonts to render */
    font-family: 'Jersey 10', 'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji', sans-serif;
    word-break:keep-all;
  }
  .cell.correct{background:#6aaa64;border:none;color:#fff;}
  .cell.present{background:#c9b458;border:none;color:#fff;}
  .cell.wrong{background:#787c7e;border:none;color:#fff;}

  /* keyboard */
  #keyboard { width:100%; max-width:640px; display:flex; flex-wrap:wrap; justify-content:center; gap:8px; margin-top:12px; }
  .key {
    min-width:42px; padding:8px 10px; border-radius:6px; background:#e6e6e6; text-align:center; cursor:pointer; user-select:none;
    box-sizing:border-box; font-size:18px;
    font-family: 'Jersey 10', 'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji', sans-serif;
  }
  .key.enter, .key.backspace { background:var(--accent); color:#fff; min-width:92px; }
  .key.key-correct { background:#6aaa64; color:#fff; }
  .key.key-present { background:#c9b458; color:#fff; }
  .key.key-wrong { background:#787c7e; color:#fff; }

  /* status / answer */
  #answer-display { margin-top:12px; font-weight:700; }

  /* small screens */
  @media (max-width:520px){
    .cell { width:44px;height:44px;font-size:22px; }
    .key { min-width:36px; font-size:16px; padding:6px 8px; }
    .key.enter, .key.backspace { min-width:76px; }
  }
</style>
</head>
<body>

<!-- Header + accordion (full content) -->
<header class="topnav" role="banner">
  <h1><a class="logo" href="/">THE Randoms</a></h1>
  <span class="menu-icon" onclick="toggleMenu()" aria-label="Open menu" tabindex="0">&#9776;</span>

  <div class="topnav-right" role="navigation" aria-label="Site Menu">
    <div class="accordion-section">
      <button class="accordion-toggle" aria-expanded="false">Jokes &amp; Fun</button>
      <div class="accordion-content" hidden>
        <a href="jokes.html">Jokes</a>
        <a href="memes.html">Memes</a>
        <a href="nfl.html">NFL</a>
        <a href="quizzes.html">Quizzes</a>
        <a href="wouldyourather.html">Would You Rather</a>
      </div>
    </div>

    <div class="accordion-section">
      <button class="accordion-toggle" aria-expanded="false">Knowledge &amp; Facts</button>
      <div class="accordion-content" hidden>
        <a href="advice.html">Advice</a>
        <a href="facts.html">Facts</a>
        <a href="pages.html">Pages</a>
        <a href="people.html">People</a>
        <a href="quotes.html">Quotes</a>
      </div>
    </div>

    <div class="accordion-section">
      <button class="accordion-toggle" aria-expanded="false">Music &amp; Videos</button>
      <div class="accordion-content" hidden>
        <a href="songs.html">Songs</a>
        <a href="videos.html">Videos</a>
      </div>
    </div>

    <div class="accordion-section">
      <button class="accordion-toggle" aria-expanded="false">Words, Letters &amp; Numbers</button>
      <div class="accordion-content" hidden>
        <a href="letters.html">Letters</a>
        <a href="numbers.html">Numbers</a>
        <a href="words.html">Words</a>
      </div>
    </div>

    <div class="clickable-section" onclick="location.href='randomsoftheday.html'">Randoms Of The Day</div>
  </div>
</header>

<!-- Game area -->
<main class="page" role="main" aria-live="polite">
  <h2>Randle â€” daily 5-char puzzle</h2>
  <div id="board" aria-label="Randle board" ></div>
  <div id="keyboard" aria-hidden="false"></div>
  <div id="answer-display" aria-live="polite"></div>
</main>

<!-- footer is intentionally left to your holiday-theme.js to create (do not duplicate) -->
<script>
/* ------------- Header menu interactions (same style as your other pages) ------------- */
function toggleMenu(){
  const topnav = document.querySelector('.topnav');
  topnav.classList.toggle('active');
  document.body.classList.toggle('menu-open');
}
document.querySelectorAll('.accordion-toggle').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const parent = btn.parentElement;
    const isOpen = parent.classList.contains('open');
    document.querySelectorAll('.accordion-section').forEach(s=>{
      if(s !== parent) s.classList.remove('open');
    });
    parent.classList.toggle('open');
    const content = parent.querySelector('.accordion-content');
    if(content) content.hidden = !parent.classList.contains('open');
    btn.setAttribute('aria-expanded', parent.classList.contains('open'));
  });
});

/* ------------- Game logic ------------- */
/* Modes by weekday (Sunday = 0) - you can change day-to-mode mapping here */
const day = new Date().getDay();
const MODE_BY_DAY = ['letters','emojis','numbers','symbols','letters','emojis','numbers'];
const mode = MODE_BY_DAY[day] || 'letters';

/* Key sets */
const KEYSETS = {
  letters: "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),
  numbers: "0123456789".split(""),
  symbols: ["!","@","#","$","%","^","&","*","(",")","-","_","+","=","{","}","[","]","<",">","/","|","~","`"],
  emojis: ["ðŸ˜€","ðŸ˜Ž","ðŸ¥³","ðŸ¤–","ðŸ‘»","ðŸ¶","ðŸ±","ðŸ­","ðŸ¦Š","ðŸ°","ðŸŽ","ðŸŒ","ðŸ‡","ðŸ“","ðŸ’","âš½","ðŸ€","ðŸˆ","âš¾","ðŸŽ¾","ðŸš—","ðŸš•","ðŸš™","ðŸšŒ","ðŸš“"]
};

/* Utility: split into array of graphemes (handles surrogate pairs) */
const splitChars = s => Array.from(s);

/* Create daily puzzle: for letters we might want a dictionary word, but per request we'll pick deterministic "random" 5-chars based on day seed */
function getDaySeed(){
  const now = new Date();
  const localMidnight = new Date(now.getFullYear(), now.getMonth(), now.getDate());
  return Math.floor(localMidnight.getTime()/(1000*60*60*24));
}
function deterministicPick(arr, seedOffset){
  const seed = getDaySeed() + (seedOffset||0);
  return arr[seed % arr.length];
}
function makePuzzleForMode(m){
  const pool = KEYSETS[m];
  // create deterministic 5-char string (allows repeats)
  let out = '';
  for(let i=0;i<5;i++){
    out += deterministicPick(pool, i);
  }
  return out;
}

/* Game state */
let answer = makePuzzleForMode(mode);             // string of 5 characters (graphemes)
let answerChars = splitChars(answer);
let rows = 6;
let currentRow = 0;
let currentGuess = ''; // keep as string of graphemes appended from keyboard clicks
let gameOver = false;

/* DOM references */
const boardEl = document.getElementById('board');
const keyboardEl = document.getElementById('keyboard');
const answerDisplay = document.getElementById('answer-display');

/* Build board (6 rows x 5 cells) */
function buildBoard(){
  boardEl.innerHTML = '';
  for(let r=0;r<rows;r++){
    const row = document.createElement('div');
    row.className = 'row';
    for(let c=0;c<5;c++){
      const cell = document.createElement('div');
      cell.className = 'cell';
      cell.setAttribute('data-row', r);
      cell.setAttribute('data-col', c);
      row.appendChild(cell);
    }
    boardEl.appendChild(row);
  }
}

/* Build keyboard for current mode */
function buildKeyboard(){
  keyboardEl.innerHTML = '';
  const keys = KEYSETS[mode];
  // We will display keys in provided order
  keys.forEach(k=>{
    const key = document.createElement('div');
    key.className = 'key';
    key.textContent = k;
    key.addEventListener('click', ()=> onKeyPress(k));
    keyboardEl.appendChild(key);
  });
  // Enter & Backspace (larger)
  const enter = document.createElement('div');
  enter.className = 'key enter';
  enter.textContent = 'Enter';
  enter.addEventListener('click', submitGuess);
  keyboardEl.appendChild(enter);

  const back = document.createElement('div');
  back.className = 'key backspace';
  back.textContent = 'âŒ«';
  back.addEventListener('click', onBackspace);
  keyboardEl.appendChild(back);
}

/* Update board UI while typing */
function renderCurrentGuess(){
  const row = boardEl.children[currentRow];
  const chars = splitChars(currentGuess);
  for(let i=0;i<5;i++){
    const cell = row.children[i];
    cell.textContent = chars[i] || '';
    cell.classList.remove('correct','present','wrong');
  }
}

/* Key press from screen keyboard */
function onKeyPress(k){
  if(gameOver) return;
  // only allow input when less than 5 graphemes
  const chars = splitChars(currentGuess);
  if(chars.length >= 5) return;
  currentGuess = currentGuess + k;
  renderCurrentGuess();
}

/* backspace */
function onBackspace(){
  if(gameOver) return;
  const arr = splitChars(currentGuess);
  arr.pop();
  currentGuess = arr.join('');
  renderCurrentGuess();
}

/* Evaluate guess using Wordle-like two-pass algorithm with counts (handles duplicates correctly) */
function submitGuess(){
  if(gameOver) return;
  const guessChars = splitChars(currentGuess);
  if(guessChars.length !== 5){
    // could show a small toast; for now, ignore
    return;
  }

  // Build counts of answer characters for second-pass
  const counts = {};
  answerChars.forEach(ch => counts[ch] = (counts[ch]||0)+1);

  // Prepare result array
  const result = Array(5).fill('wrong');

  // First pass: correct positions
  for(let i=0;i<5;i++){
    if(guessChars[i] === answerChars[i]){
      result[i] = 'correct';
      counts[guessChars[i]]--;
    }
  }
  // Second pass: present if remaining
  for(let i=0;i<5;i++){
    if(result[i] === 'correct') continue;
    const g = guessChars[i];
    if(counts[g] > 0){
      result[i] = 'present';
      counts[g]--;
    } else {
      result[i] = 'wrong';
    }
  }

  // Update UI for the row
  const row = boardEl.children[currentRow];
  for(let i=0;i<5;i++){
    const cell = row.children[i];
    cell.textContent = guessChars[i];
    cell.classList.add(result[i]);
  }

  // Update keyboard states: keep best-state priority (correct > present > wrong)
  guessChars.forEach((ch, idx) => {
    const keyEls = Array.from(keyboardEl.querySelectorAll('.key')).filter(k=>k.textContent === ch);
    keyEls.forEach(el => {
      // compute existing state priority
      const prev = el.classList.contains('key-correct') ? 3 : el.classList.contains('key-present') ? 2 : el.classList.contains('key-wrong') ? 1 : 0;
      const newState = result[idx] === 'correct' ? 3 : result[idx] === 'present' ? 2 : 1;
      if(newState > prev){
        el.classList.remove('key-correct','key-present','key-wrong');
        el.classList.add(newState === 3 ? 'key-correct' : newState === 2 ? 'key-present' : 'key-wrong');
      }
    });
  });

  // Win or lose
  if(guessChars.join('') === answerChars.join('')){
    answerDisplay.textContent = 'Correct! Answer: ' + answerChars.join('');
    gameOver = true;
    return;
  }

  currentRow++;
  currentGuess = '';
  if(currentRow >= rows){
    answerDisplay.textContent = 'Game over â€” answer: ' + answerChars.join('');
    gameOver = true;
    return;
  }
}

/* allow physical keyboard for letters/numbers/symbols (emojis still use on-screen) */
document.addEventListener('keydown', (e)=>{
  if(gameOver) return;
  if(mode === 'emojis') return; // only on-screen for emojis
  // handle Enter and Backspace
  if(e.key === 'Enter'){ submitGuess(); return; }
  if(e.key === 'Backspace'){ onBackspace(); return; }
  // normalize key for letters
  let key = e.key;
  if(key.length === 1){
    // In letters mode accept letters only; in numbers/symbols accept accordingly
    if(mode === 'letters'){
      if(/[a-zA-Z]/.test(key)){ onKeyPress(key.toUpperCase()); }
    } else if(mode === 'numbers'){
      if(/[0-9]/.test(key)){ onKeyPress(key); }
    } else if(mode === 'symbols'){
      // accept common symbol keys (e.key already contains them)
      const allowed = KEYSETS.symbols;
      if(allowed.includes(key)) onKeyPress(key);
    }
  }
});

/* Initialize display */
function init(){
  // rebuild answer to be deterministic every day
  // (if you want to persist across reloads use localStorage)
  buildBoard();
  buildKeyboard();
  renderCurrentGuess();
  answerDisplay.textContent = ''; // hide until end
  // Optional: for debugging, you can console.log the answer:
  // console.log('DEBUG answer:', answerChars.join(''));
}
init();

</script>

<!-- Let holiday-theme.js create the footer & theme -->
<script src="holiday-theme.js" defer></script>
</body>
</html>
