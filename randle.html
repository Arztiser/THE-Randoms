<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#E82B38">
<title>Randle - THE Randoms</title>
<link rel="icon" type="image/png" href="./img/pfp.png">
<link href="https://fonts.googleapis.com/css2?family=Jersey+10:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Jersey 10', sans-serif;
  background: #fff;
  color: #000;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
}

h1 { margin-top: 20px; color:#E82B38; }

#grid {
  display: grid;
  grid-template-rows: repeat(6, 60px);
  grid-gap: 8px;
  margin-top: 20px;
}

.row {
  display: grid;
  grid-template-columns: repeat(5, 60px);
  grid-gap: 8px;
}

.cell {
  border: 2px solid #E82B38;
  font-size: 32px;
  display: flex;
  justify-content: center;
  align-items: center;
  text-transform: uppercase;
  font-family:'Jersey 10';
  font-weight: 700;
}

#keyboard-container {
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  margin-top:20px;
}

.key {
  padding:10px 14px;
  margin:4px;
  background:#E82B38;
  color:white;
  font-family:"Jersey 10";
  font-size:24px;
  border-radius:6px;
  cursor:pointer;
  user-select:none;
  text-align:center;
}

.key.blackout { background:#000; }

.key.enter { background:#28a745; }
.key.backspace { background:#ffc107; }

</style>
</head>
<body>
<h1>Randle - Today's Puzzle</h1>
<div id="grid"></div>
<div id="keyboard-container"></div>

<script>
// ---- Day & Key Sets ----
const days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
const dayIndex = new Date().getDay(); // 0=Sunday
const today = days[dayIndex];

const keySets = {
  'Sunday': 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split(''),
  'Monday': ['😀','😂','🥰','😎','😢','🤔','😡','😱','🤪','😴','🙃','😇','😈','🤩','🥳','🤯','😷','😺','👻','💩','🎃','🌈','🍕','🎉','💎','⚡'],
  'Tuesday': ['0','1','2','3','4','5','6','7','8','9'],
  'Wednesday': ['!','@','#','$','%','^','&','*','(',')','-','_','=','+','[',']','{','}',';',':','<','>','/','?','~','|'],
  'Thursday': 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split(''),
  'Friday': ['😀','😂','🥰','😎','😢','🤔','😡','😱','🤪','😴','🙃','😇','😈','🤩','🥳','🤯','😷','😺','👻','💩','🎃','🌈','🍕','🎉','💎','⚡'],
  'Saturday': ['0','1','2','3','4','5','6','7','8','9']
};

// ---- Generate today's puzzle ----
let puzzle = Array.from({length:5}, ()=> keySets[today][Math.floor(Math.random()*keySets[today].length)]);

// ---- Build grid ----
const grid = document.getElementById('grid');
const totalRows = 6;
let currentRow = 0;
let currentGuess = [];

for(let i=0;i<totalRows;i++){
  const row = document.createElement('div');
  row.className='row';
  for(let j=0;j<5;j++){
    const cell = document.createElement('div');
    cell.className='cell';
    row.appendChild(cell);
  }
  grid.appendChild(row);
}

// ---- Build keyboard ----
const keyboardContainer = document.getElementById('keyboard-container');
let keys = [...keySets[today]];

function createKeyboard(){
  keyboardContainer.innerHTML='';
  keys.forEach(k=>{
    const key = document.createElement('div');
    key.textContent = k;
    key.className='key';
    key.addEventListener('click',()=>handleKey(k));
    keyboardContainer.appendChild(key);
  });

  // Backspace
  const back = document.createElement('div');
  back.textContent='⌫';
  back.className='key backspace';
  back.addEventListener('click',backspace);
  keyboardContainer.appendChild(back);

  // Enter
  const enter = document.createElement('div');
  enter.textContent='ENTER';
  enter.className='key enter';
  enter.addEventListener('click',submitGuess);
  keyboardContainer.appendChild(enter);
}
createKeyboard();

// ---- Handle input ----
function handleKey(char){
  if(currentGuess.length < 5){
    currentGuess.push(char);
    updateGrid();
  }
}

function backspace(){
  currentGuess.pop();
  updateGrid();
}

function updateGrid(){
  const row = grid.children[currentRow];
  for(let i=0;i<5;i++){
    row.children[i].textContent = currentGuess[i] || '';
    row.children[i].style.background=''; // reset color before submit
  }
}

function submitGuess(){
  if(currentGuess.length !==5){ alert('Guess must be 5 characters!'); return;}
  const row = grid.children[currentRow];

  // Wordle-style coloring
  for(let i=0;i<5;i++){
    if(currentGuess[i] === puzzle[i]){
      row.children[i].style.background='green';
    } else if(puzzle.includes(currentGuess[i])){
      row.children[i].style.background='yellow';
    } else {
      row.children[i].style.background='gray';
    }
  }

  // Blackout keys not in puzzle
  document.querySelectorAll('.key').forEach(k=>{
    const keyChar = k.textContent;
    if(!puzzle.includes(keyChar) && keys.includes(keyChar)) k.classList.add('blackout');
  });

  if(currentGuess.join('') === puzzle.join('')){
    alert('You got it!');
    return;
  }

  currentRow++;
  currentGuess=[];
  if(currentRow>=totalRows){
    alert('Out of guesses! The word was: '+puzzle.join(''));
  }
}

// ---- Optional: Keyboard typing via physical keyboard ----
document.addEventListener('keydown',e=>{
  const key = e.key;
  if(key==='Enter') submitGuess();
  else if(key==='Backspace') backspace();
  else if(keys.includes(key)) handleKey(key);
});

</script>
</body>
</html>
